# Задание: Создание API Mix.tj

## Цель задания
Создать простое REST API, имитирующее функциональность популярного таджикского интернет-портала mix.tj.

## Требования к проекту

1. Использовать ASP.NET Core Web API
2. Реализовать базовую структуру данных для хранения информации о пользователях, новостях, видео и других контентных блоках
3. Создать CRUD операции для основных сущностей
4. Реализовать простой поиск по ключевым словам
5. Добавить авторизацию и управление ролями пользователей


## Технологии и требования

- ASP.NET Core Web API
- Entity Framework Core
- JWT для аутентификации
- Swagger для документации API
- Использовать принципы SOLID
- Использовать Microsoft Identity
- Логгировать действия в проекте через Serilog

## Валидация данных

1. Пользователи:
   - Email (валидный формат)
   - Пароль (не менее 12 символов, включая цифры, буквы и символы)
   - Никнейм (уникальный, латиница или кириллица, не более 30 символов)
   - Профиль (поле "О себе" не более 500 символов)

2. Новости:
   - Заголовок (не менее 10 символов)
   - Контент (не менее 100 символов)
   - Категория (обязательное поле, выбор из предопределенного списка)
   - Теги (до 5 тегов, каждые 5 символов)

3. Видео:
   - Название (не менее 5 символов)
   - Описание (не более 200 символов)
   - URL (поддерживаются только видеохостинги типа YouTube, Vimeo, etc.)
   - Тип видео (обязательное поле, выбор из предопределенного списка)

4. Комментарии:
   - Текст (от 20 до 5000 символов)
   - Ответ на комментарий (от 20 до 1000 символов)

5. Файлы:
   - Размер файла не более 100 МБ
   - Поддерживаются форматы: JPG, PNG, PDF, MP4, MOV, AVI


###  Пользователи

GET     /api/users           - Получение списка пользователей [Админ, Модератор]
POST    /api/register        - Регистрация нового пользователя [Гость]
POST    /api/login          - Авторизация [Гость]
PUT     /api/users/{id}      - Обновление профиля [Админ, Модератор, Пользователь] (добавление роли или убрать роль)
DELETE  /api/users/{id}      - Удаление пользователя [Админ]

###  Новости

GET     /api/news           - Получение списка новостей [Админ, Модератор, Пользователь]
POST    /api/news           - Создание новой новости [Админ, Модератор, Пользователь]
GET     /api/news/{id}      - Получение конкретной новости [Админ, Модератор, Пользователь]
PUT     /api/news/{id}      - Обновление новости [Админ, Модератор, Пользователь]
DELETE  /api/news/{id}      - Удаление новости [Админ, Модератор]
GET     /api/news/search    - Поиск новостей по ключевым словам [Админ, Модератор, Пользователь]

###  Видео

GET     /api/videos         - Получение списка видео [Админ, Модератор, Пользователь]
POST    /api/videos         - Загрузка нового видео [Админ, Модератор, Пользователь]
GET     /api/videos/{id}    - Получение информации о видео [Админ, Модератор, Пользователь]
PUT     /api/videos/{id}    - Обновление видео [Админ, Модератор, Пользователь]
DELETE  /api/videos/{id}    - Удаление видео [Админ, Модератор]

###  Комментарии

GET     /api/news/{newsId}/comments   - Получение комментариев к новости [Админ, Модератор, Пользователь]
POST    /api/news/{newsId}/comments   - Создание комментария [Админ, Модератор, Пользователь]
PUT     /api/comments/{id}            - Обновление комментария [Админ, Модератор, Пользователь]
DELETE  /api/comments/{id}            - Удаление комментария [Админ, Модератор]

###  Лайки

POST    /api/news/{newsId}/likes      - Добавить лайк/дизлайк к новости [Админ, Модератор, Пользователь]
GET     /api/news/{newsId}/likes      - Получить лайки новости [Админ, Модератор, Пользователь]
DELETE  /api/news/{newsId}/likes      - Удалить лайк/дизлайк с новости [Админ, Модератор, Пользователь]

POST    /api/videos/{videoId}/likes    - Добавить лайк/дизлайк к видео [Админ, Модератор, Пользователь]
GET     /api/videos/{videoId}/likes    - Получить лайки видео [Админ, Модератор, Пользователь]
DELETE  /api/videos/{videoId}/likes    - Удалить лайк/дизлайк с видео [Админ, Модератор, Пользователь]

POST    /api/comments/{commentId}/likes - Добавить лайк/дизлайк к комментарию [Админ, Модератор, Пользователь]
GET     /api/comments/{commentId}/likes - Получить лайки комментария [Админ, Модератор, Пользователь]
DELETE  /api/comments/{commentId}/likes - Удалить лайк/дизлайк с комментария [Админ, Модератор, Пользователь]

###  Поиск

GET     /api/search           - Поиск по всем контентным блокам [Админ, Модератор, Пользователь]

###  Примечания по безопасности

1. Все endpoint'ы требуют авторизации, кроме:
   - /api/register
   - /api/login
   - GET запросы к публичному контенту (новости, видео)

2. Пользователь может редактировать только свой профиль
   - PUT /api/users/{id} проверяет, что редактируемый пользователь совпадает с авторизованным

3. Модератор может редактировать любой контент
   - Но не может удалять его

4. Администратор имеет полный доступ ко всем операциям